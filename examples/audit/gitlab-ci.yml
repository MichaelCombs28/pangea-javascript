.example_audit_base:
  image: node
  before_script:
    - cd examples/audit
    - npm ci --legacy-peer-deps
  cache:
    - key:
        files:
          - package-lock.json
      paths:
        - node_modules

test_example_audit_app:
  extends: .example_audit_base
  image: cypress/browsers:node17.8.0-chrome99-ff97-slim
  stage: Integration Test
  script:
    - npm run cypress:info
    - npm run cypress:ci
  artifacts:
    when: always
    paths:
      - cypress/videos/**/*.mp4
      - cypress/screenshots/**/*.png
    expire_in: 1 day
